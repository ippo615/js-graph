<!DOCTYPE html>
<html >
<head>
	<meta charset="utf-8">
	<title>Grapher</title>
	<meta name="description" content="Grapher">
	<meta name="author" content="Andrew Ippoliti">

	<!-- IN ANDROID BROWSER - enter "about:debug" in the address bar
	     It should give you some extra options and a 'js console' -->

	<!-- Mobile viewport optimization http://goo.gl/b9SaQ -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=320, height=320, user-scalable=no" />
	
	<!-- Hide browser chrome (iOS only) -->
	<meta name="apple-mobile-web-app-capable" content="yes" />	
	<link rel="stylesheet" href="./styles/default.css" />
	<style type="text/css">
	/*.container { min-width: 480px; padding: 0 0.333em;  float: left; }*/
	*, *:before, *:after {
		-moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;
	}
	@media all and (min-width: 980px){

	}
	@media all and (min-width: 1600px){

	}
	canvas {
		-webkit-box-shadow: 0px 0px 8px 1px #aaaaaa;
		box-shadow: 0px 0px 8px 1px #aaaaaa;
		position: absolute;
		top: 0;
		left: 0;
	}
	html, body { margin: 0; padding: 0 }
	body { font-size: 32px; text-align: center; overflow: hidden; }
	label {display: block; font-size: 1.5em; }
	input {display: block; border: none; }
	div {background: #FFF;}

	button {width: 25%;height:25%; float: left;}
	canvas:active,canvas:focus {cursor: pointer;}

	#container {position: relative; top:0; left:0;}

	input {width: 100%; display: block; border-bottom: 1px solid #888;}
	#form-equations {height: 80%; position: absolute; bottom: 0px;}
	.equation {height: 25%;} 
	#in-equation-1 {color: #800;}
	#in-equation-2 {color: #080;}
	#in-equation-3 {color: #088;}
	#in-equation-4 {color: #880;}
	.panel { margin: 0; float: left; position: relative; }

	button {width: 25%; float: left; height: 20%; line-height: 1em; font-size: 75%; }

	.btn-pan { background: transparent; border:none; }
	#btn-pan-up {position:absolute; left: 5%; width: 90%; top: 0; }
	#btn-pan-down {position:absolute; left: 5%; width: 90%; bottom: 0; }
	#btn-pan-left {position:absolute; left: 0; top: 0;}
	#btn-pan-right {position:absolute; right: 0; top: 0; }

	.show {visibility: visible;}
	.hide {visibility: hidden;}
	.active {font-weight: bold; text-decoration: underline;}

	.animate { transition: all .4s ease-in-out; }

	.keypad-btn {position: absolute; width: 25%; height: 25%; line-height: 1em;}
	.keypad-tab {position: absolute; width: 25%; height: 25%; line-height: 1em;}

	.btn-0-0 { top:0; left:0; }
	.btn-0-1 { top:0; left:25%; }
	.btn-0-2 { top:0; left:50%; }
	.btn-0-3 { top:0; left:75%; }

	.btn-1-0 { top:25%; left:0; }
	.btn-1-1 { top:25%; left:25%; }
	.btn-1-2 { top:25%; left:50%; }
	.btn-1-3 { top:25%; left:75%; }

	.btn-2-0 { top:50%; left:0; }
	.btn-2-1 { top:50%; left:25%; }
	.btn-2-2 { top:50%; left:50%; }
	.btn-2-3 { top:50%; left:75%; }

	.btn-3-0 { top:75%; left:0; }
	.btn-3-1 { top:75%; left:25%; }
	.btn-3-2 { top:75%; left:50%; }
	.btn-3-3 { top:75%; left:75%; }

	.icon { height: 1em; }
	</style>
	<style type="text/css" id="style-dynamic"></style>

	<script type="text/javascript" src="lib/jquery.min.js"></script>
	<script type="text/javascript" src="lib/hammer.min.js"></script>
</head>
<body class='animate'>

	<div id='container' class='animate'>
		<div id='panel-graph' class='animate panel'>
			<canvas id='canvas-graph' ></canvas>
			<canvas id='canvas-grid' ></canvas>
			<button class="btn-pan" id='btn-pan-up'>&uarr;</button>
			<button class="btn-pan" id='btn-pan-down'>&darr;</button>
			<button class="btn-pan" id='btn-pan-left'>&larr;</button>
			<button class="btn-pan" id='btn-pan-right'>&rarr;</button>
		</div>

		<div id='panel-equations' class='animate panel'>
			<button id='btn-annotate' class=''><image class='icon' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAUiSURBVHic7ZpNaFxVFMd/xzg2UsxgDdiKIX5AKZaYIFZddCFCGyGLliJiC341xoJg6UJdSMSPWbQFVxZEFKN2Ua2FioRmoTYoVuwm1mhVxFIUW61Rq6YI2haPi3tHbt57M7nvzZt5dzAHLjM5991/zvnPeed/34eoKv9nu6DoAIq2BQKKDqBoWyCg6ACKtgUCig4gq4lIWUSOisi0iCzNjNOO+wARKQEfAjdb13fALap6Ki1Wu1bAHkzyZ4CfgF7gcKZKUNW2GsBOQIGzwGZgA3DK+r4FlqbBa6sKEJER4DFMso8Dx4HTwENkrIS26QEiMghMYE7bZ4EDkUOWAM8Dl5OiJ7RFBYjIAPA2Jt7XiScPGSsheAJEpAeYBBYBHwAv1jk8NQlBnwIiUgaOAFcDXwFbgfMeS71Ph2ArwGr9fkzy54FX8EseUlRCsAQALwO3ASeBO4FHgb4U671ICJIAEakAd2M2OkOq+hZG758kZxKCI0BEhoFRTLnfoarTdmrGfj5FYyS86U4GRYDV+hfsn1tU9R3r78ZI31ZgHfAE6UiYBX6z3zvciWAIsFq/D7gQqKjqmPV3YvYAr6nqHlU9hDkd0pAwCqzAkHDXnP8bggxarT8MXAHsVtV7rV+AN4A/VXVzZM1qjEpUgM/rwD8IbAT+xsjhp+5k4RVgtX4Ck/xB4AFnejtwGbAlus6zEoYwyf8DrIsmXwUq8squZJNWzK9YduZGgC9cXw2M1cAvwMPArc54xCauwEjN9QUTsNsGeBLocfxrge+BXg+M5ZaAXx0ShjGXywrsrLu+wOQrNsBZoN/x9wE/Aqs8MLqBb4BNthJm7Ckxa7H3zYtRUPLDNsBzwKDjX4a5qbHeA6MT+AgYdXyDFlMxTbUUHAGRIIcd/2JgCtjmgSHAXmDM8ZWA9yzu8fl6RyEEAANOeT7j+DuAcWCXJ84Om2zJ8b2a1E+CIQDoscEpRuvduV2WgA4PnJg6AE87/WQgVVwtSr6MkTnFyJ77y22zpb/YAyemDsD9Sf0kGAKor/XrbdNb5oETUwdLSKyfhEZALa1fZRPq88CIqQPQ7/STSub4mpy8q/UDjr/XlvJaD4yYOgBXAieS+kkwBFBb68u2idXcnjrHxtQB6AI+S+onwRBAba2vavUOT5w56mDXv5vUT4IhgLlaX4nMjWE2MOKBE1MHMmp9ywigvtaPYraunR44MXXA3ArLpPWtJOBj59y8yPFvwly0dHtgxNSBBrW+lQSoHa7WXwv8ACz3WB9TB2BNUj8JmoAEv89GJ6YOwPXAH0n9pK0I8FhXVYftji83rW8HAuaoAzlrfdAERNWhGVrfcgKAY/YX3TjP8TF1wDwEzVXriyDAHeNJ8pekDs3S+qIJUGC8xvHuRue+Zml9CARovdPBan31NnbuWh8KAXtrrGm61reEAMzDx3oEHEtY0xKtrzdyezgqIkeBlRmXTwK3q+q5XIJJYXk+HF2Scd37wIYikgfzLD4v+xpz765qQ6o6kSN+UyyXCrBvcNwQcZ/OA7vZ1jABIrIC8wJjl+P+GfikUexWWCYCRORiERkUkQPAl8B1kUOeU9WzDUfXAoupgIgsAi6JjC7gKuBGO1YSednIsUPAGlX9qzkh52yOJt+EeaRcT8vnG/vxuOcX0nAJmGwg8WngHjzu9oY2XBm8NGXxnMBcx7+kqgdTrg3G/usBItKPuYa/BnM5esZ+Vr//jml4U8CUqs4kAbabBfGeYJFW+HuCRdu/zJh3MXuGyMYAAAAASUVORK5CYII=' /></button>
			<button id='btn-zoom-in' class=''><image class='icon' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATwSURBVHic7ZtPaF1FFMZ/J5qKAU2kDdLXUDSCoAgWQ0pIFQRBSkukSJeCC92YnQtXpfIWbsxaEOqqWRihKpWAFqUQ0KdtxI0KEQTpommpEEqxNCYxOS5mLt5c7sy9d+6fJO/5wVm8OzPnfPPdmbnz74mq0su4v0pnIjIIHAeOAiPAIWstm+UGsGztOrAIXFLVO1XyKAIp2wJEpAWcsvYi0F/QxQawAFwELqrqjVKEikJVgww4DMwCm4BWZJvW5+FQXoXrEVDxIWAGWK2w4klbtTGGdpUAwGlgpcaKJ20FOL3jAgACtIGtBisf2ZaNLXUIkDkIisgAcN6+/Ty4BcwDHcyof9MawEFrLeAYMAU8mtPvp8DrqnovZ/58yHjzA8AVst/SOvABMEGBN4VpWRO27HqOOFeAgUa6gCV3IYPQFjAHjJYmAqPWV1Y3u1BE5DICtDOIXAPGq+6TwLj17YvdrlUATH/3vYlvgeGqKx+LP2xj+FpeJV+HtOBD+D91HwP76qp8jMc+G8v3iSw9T0gLPJPx5muvfEIEX0uYqVQAzPTWNcO7FtLsgTHMoucyMBlQftgzJqxSctqcDDbr6XNBAx6wFPPTCfQx7hmTZisRADM5cS1s5ko0422+SviZc3DbBFqhfvv4D6dg2+8IG8CZlOdN4wyGSxJ9GO5BSAqQhnOq+kdogKpgOZxzJAcLEDWvQdxT0YlSfayiLmB9TTg4rgODZbrAcdJ3cm4BV4PVrR5XMZyS6MfUoTAiAY460ufVSr8bYLnMO5JddfAiEmDEkd4JcVozXJxcdfAiEuCQI73ZDcp8cHFy1cGLLAFuOp4jIpMi0hER9VlKOW9+EVkSkTEPZxenIAGi0XWN9NH1gGdEvuwoU4UteuIecJRZKzsRKoqHSpTNwl81+t6GSABXvzroKfsW8Fu1dAD4HjjrSXdxChqvoqOxZeAxR7Bf0gqq6k/AU1kBkuOAqkoxiqmc0rAc4ixqAa7CLcfznYSLUykBrjvSj4U4rRkuTq46eBEJsOhInxKRsk22MlguU45kVx38+H8xZFjdwRxRp+G1IGXrgYvLgobeMYipO41b3eCDj6S/En5GcbfS6WC/sQA9uSWWDFLHpmgn5mcp0Ef9m6I2UB3b4pOYdcMiMBZQvrltcRuwdw9GbNDePhqzwXv3cDRGou0hEI0J3Xk8bons1gsSCzRxQcKS2m1XZKKR/5WqBNhLl6Ti+Ad4U1XPB5TdjgJvqs3OXJPzdb+3a+0CKUI0fVEyj73XmABWhCauyv5tLW/+D4G+RgSICVHrZWngOeDPAmU/AfobEyAmRAuzlP6a/CN53NZt2WkSqzrgSbLnBHG7RMGLlKX/LxBHHX+YEJERK1DmDrTFD8BJVb2di3OVAtQFEdkPfEn+E+BfgZdV1Xm0F6HMyVBjUNUV4CXMsjoPngE6IvJEVsY9IQCAqt4FTgCf5SzyOPCdiDyb5XhPGXAf8BH5B8bbwPO1fQV2UIj3C4hwDzjRVQJYEd4pIMIGZmDsHgGsCG9gFkd5RPgmWX5PfAazICKvYrbPHsjIugo8oqpr0YM98xXwQVU/B04CdzOyPgg8HX/QFS0ggoiMA18B+x1ZfgaOaKzSXdECIqjqj8ALuI/K39XEG+8qAQBUdQk4gvlC/I4ZIOcxu8hfJPN3VRdIwt4neFg9i61/AdvTDYpf0Lg4AAAAAElFTkSuQmCC' /></button>
			<button id='btn-zoom-out' class=''><image class='icon' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS/SURBVHic7ZtNaB1VFMd/J5qKAU2kDdLXUDSCoAgWJSVYBUGQ0hIp0qXgQinYnQtXRXkLN2YtCHXVLIxQlUhAiyIENNpG3KhQQZAumpYKoRRLYxKT42Lu4GR4587MnY+XvOcfzuLN/Tj/878fc+fe+0RV6WfcXWVlIjIMHAUOA2PAAWctl+UasOzsKrAEXFDVW1XyKAIp2wNEpAWccPY8MFiwig1gAZgD5lT1WilCRaGqQQYcBGaATUArsk1X58FQXoXjCAh8BJgGVisMPG2rzsfIjhIAOAms1Bh42laAk10XABCgDWw1GHxsW8631CFA5iQoIkPAOdf6eXADmAcWiWb9684A9jtrAUeAKeDBnPV+Aryqqndy5s+HjJYfAi6S3UrrwPvAJAVaiqhnTbqy6zn8XASGGhkCjtz5DEJbwCwwXpoIjLu6sobZ+SIilxGgnUHkCjBR9ZgEJlzdPt/tWgUgGu++lvgWGK06+IT/UefD1/MqeTt0cj6C/1X3EbCnruATPPY4X75XZOl1QifH0xktX3vwKRF8PWG6UgGIlrfWCu9Knd3eI8KoZ05YpeSyOe1sxjPmKp/wCogw4ZmTZioRgGhxYn3YzHYr+AS/WYPbJtAKrXeA/3ACtv2OsQGc6fC8aZwh4pLGABH3IKQF6ISzqvpHqIOq4DicNZKDBYi71zD2UnSy290/MQwmDY7rwHCZIXCUzjs5N4BLwepWj0tEnNIYJIqhMGIBDhvp8+qk3wlwXOaNZCsGL2IBxoz0xZBKa4bFyYrBi1iAA0Z6sxuU+WBxsmLwIkuA68ZzROQZEVkUEa3YLovI0x7OFqcgAeLZdY3Os+s+z4z8jVGmClvy+N1nlFkruxAqivtKlM3CXzXWvQ2xANa42u8p+wbwW7V0APgeeNuTbnEKmq/io7Fl4CHD2S+dCqrqT8BjIU5LwhJgOaSyuAdYhVvG827C4lRKgKtG+pGQSmuGxcmKwYtYgCUjfUpEJKTiOuC4TBnJVgx+/P8xFIlwi+iIuhNeCVK2HlhcFjTwjkFyHTBn5DklIuMhlVcJx+GUkWxxz0aie/XllljaSf9uijpH/b0t7hz278GIc9rfR2POef8ejiZItD0E4jmhN4/HHZGdekFigSYuSDhSO+2KTDzzv1SVALvpklQS/wCvq+q5gLLbUaCl2nTnmpxv+L1Z6xDoIETTFyXz2LuNCeBEaOKq7N/O8ub/ABhoRICEELVelgaeAv4sUPZjYLAxARJCtIDTwFfkn8mTtu7Knib1VQc8SvaaIGkXKHiRsvT/BZKo4w8TIjLmBMq7A/0DcFxVb+biXKUAdUFE9gJfkP8E+FfgRVU1j/ZilDkZagyqugK8QHQclwdPAIsi8khWxl0hAICq3gaOAZ/mLPIw8J2IPJlV8a4y4C7gQ/JPjDeBZ2t7C3RRiPcKiHAHONZTAjgR3iogwgbRxNg7AjgRXiP6OMojwtfp8rviNZgFEXmZaPvsnoysq8ADqroWP9g1bwEfVPUz4DhwOyPrvcDjyQc90QNiiMgE8CWw18jyM3BIE0H3RA+Ioao/As9hH5W/o6kW7ykBAFT1MnCI6A3xO9EEOU+0i/x5On9PDYE03H2C+9XzsfUvygXAFad14V0AAAAASUVORK5CYII=' /></button>
			<button id='btn-view-reset' class=''><image class='icon' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATbSURBVHic5ZtPaB1VFMZ/J5qKWZhICdLXUDCCoAgWJRKoQkCQ0mIpUuiiggvbLrpz4aogWbgx0J0gtG4aqBGqEg1oUcQHGqyKGxFcCNJFmzZCKEJpNDE5LuYMToe5d2buzLyX994HZ/Fm7pzzne/+mTv33ieqyiDj/jqdicgocBB4DpgA9pq1rMgKcMPsOvAjcEVV/6qTRxlI1RYgIi3gqNkMMFzSxSbQBhaBRVVdqUSoLFQ1yIB9wDywBWhNtmU+94XyKp1HQOJjwBywXmPiaVu3GGM7SgDgGLDWYOJpWwOOdV0AQIBZYLuDyce2bbGlCQFyB0ERGQEuWu0XwSqwBCwTjfo3zQD2mLWAA8DLwCMF/X4EvKaqdwuWL4acmh8BrpJfSxvAu8A0JWqKqGVN27MbBeJcBUY60gWM3OUcQtvAAjBZmQhMmq+8bna5jMhVBJjNIXINmKq7TwJT5tsXe7ZRAYj6u68mvgXG604+EX/cYvhaXi1vh6zgY/hfdR8Au5pKPsFjl8XyvSIrzxOyAs/l1HzjyadE8LWEuVoFIJreumZ415ps9h4Rxj1jwjoVp83pYPOePlf7gFdChCnPmDRfiwBEkxPXh81Ct5JP8FtwcNsCWqF+h/gfR+Ge3zE2gbMZ1zuNs0Rc0hgi4h6EtABZOK+qf4QGqAvG4bzjdrAAcfMaxT0Vne528090g2kHxw1gtEoXOEj2Ss4q8EOIsBLhlIgsiciK2ZJdkxCfxmU14/owUQ7lYcqeI1vZC4E11QK+cfhUuxc0cAEXHD7PVWkBEw59lssKarV7iWh90IUZ4FJgS3BxcuXgRSzAXsf9kAXKk/iTjzFjZcvCxcmVgxd5Atx0XPfhSENlY7g4VRKg5bgfIsCzDZWN4eLkysGLrInPQCEWwNWv9gT4/LmhsjFcnII2VGIBbpQM5sNnDZWN4eLkysGLPAFC+tX7RFtdeWhb2bJwcaokwHXH/QNlHWo0WzmBX4Q2cMLKloWLkysHP4zDcbJnV7cIXIElWlU+RbRHsGK2ZNeq+Lzl4Ho8yKc5HuyPIY3259uORvJqUNNqBi4ubQ08Y5CcByw6ypwWkckQ53XCOJx23HZxz0fqC27glsTSQQZ3UdQCDfayuAUc3I0RCzrYW2MWfHA3RxMkZj0E4jGhP7fHjchOPSDRphMHJIzUTjsiE4/8R+oSoJcOSSXxL3BSVS8GPHsvStTULN05Jufrfm802gUyhOj0Qcki9nbHBDAROnFU9m+zouXfA4Y6IkBCiEYPSwPPAH+WePZDYLhjAiSEaAFngC8pPpInbcOePUPqqw54nPw5QdKuUPIgZeX/CyTRxB8mRGTCBHqiII3vgcOqersQ5zoFaAoishv4nEjYIvgVeElVc3e2emJnSFXXgBeBrws+8hSwLCKP5RXsCQEAVPUOcAj4uOAjjwLficjTeY57yoD7cB+SyLLbwPONvQW6KMQ7JUS4CxzqKwFMhDdLiLBJNDD2jwAmwutEH0dFRPgq/XxPvAbzICKvEC2fPZBTdB14WFX/iS/0zFvAB1X9BDgM3Mkp+iDwZPJCX7SAGCIyBXwB7HYU+QXYr4mk+6IFxFDVn4AXcG+Vv6WpGu8rAQBU9TdgP9Eb4neiAXKJaBX503T5vuoCadhBzIfU87H1H3dfUdQEG+iQAAAAAElFTkSuQmCC' /></button>
			<form id='form-equations'>
				<input type='text' class='equation' id='in-equation-1' />
				<input type='text' class='equation' id='in-equation-2' />
				<input type='text' class='equation' id='in-equation-3' />
				<input type='text' class='equation' id='in-equation-4' />
			</form>
		</div>

		<div id='panel-keypad' class='animate panel' >
			<div id='keypad-numbers' class='show'>
				<button class='keypad-btn btn-0-0' id='button-1'>1</button>
				<button class='keypad-btn btn-0-1' id='button-2'>2</button>
				<button class='keypad-btn btn-0-2' id='button-3'>3</button>
				<button class='keypad-btn btn-1-0' id='button-4'>4</button>
				<button class='keypad-btn btn-1-1' id='button-5'>5</button>
				<button class='keypad-btn btn-1-2' id='button-6'>6</button>
				<button class='keypad-btn btn-2-0' id='button-7'>7</button>
				<button class='keypad-btn btn-2-1' id='button-8'>8</button>
				<button class='keypad-btn btn-2-2' id='button-9'>9</button>
				<button class='keypad-btn btn-3-0' id='button-dot'>.</button>
				<button class='keypad-btn btn-3-1' id='button-0'>0</button>
				<button class='keypad-btn btn-3-2' id='button-comma'>,</button>
			</div>
			<div id='keypad-functions' class='hide'>
				<button class='keypad-btn btn-0-0' id='button-sin'>sin</button>
				<button class='keypad-btn btn-0-1' id='button-cos'>cos</button>
				<button class='keypad-btn btn-0-2' id='button-tan'>tan</button>
				<button class='keypad-btn btn-1-0' id='button-asin'>asin</button>
				<button class='keypad-btn btn-1-1' id='button-acos'>acos</button>
				<button class='keypad-btn btn-1-2' id='button-atan'>atan</button>
				<button class='keypad-btn btn-2-0' id='button-floor'>floor</button>
				<button class='keypad-btn btn-2-1' id='button-round'>round</button>
				<button class='keypad-btn btn-2-2' id='button-ceil'>ceil</button>
				<button class='keypad-btn btn-3-0' id='button-ln'>ln</button>
				<button class='keypad-btn btn-3-1' id='button-pow'>pow</button>
				<button class='keypad-btn btn-3-2' id='button-exp'>exp</button>
			</div>
			<div id='keypad-logic' class='hide'>
				<button class='keypad-btn btn-0-0' id='button-less-than'>&lt;</button>
				<button class='keypad-btn btn-0-1' id='button-abs'>abs</button>
				<button class='keypad-btn btn-0-2' id='button-more-than'>&gt;</button>
				<button class='keypad-btn btn-1-0' id='button-less-equal'>&le;</button>
				<button class='keypad-btn btn-1-1' id='button-equal'>=</button>
				<button class='keypad-btn btn-1-2' id='button-more-equal'>&ge;</button>
				<button class='keypad-btn btn-2-0' id='button-and'>and</button>
				<button class='keypad-btn btn-2-1' id='button-or'>or</button>
				<button class='keypad-btn btn-2-2' id='button-not'>not</button>
				<button class='keypad-btn btn-3-0' id='button-xor'>xor</button>
				<button class='keypad-btn btn-3-1' id='button-x'>x</button>
				<button class='keypad-btn btn-3-2' id='button-y'>y</button>
			</div>
			<div id='keypad-operators' class='hide'>
				<button class='keypad-btn btn-0-0' id='button-add'>+</button>
				<button class='keypad-btn btn-0-1' id='button-sub'>-</button>
				<button class='keypad-btn btn-0-2' id='button-pi'>PI</button>
				<button class='keypad-btn btn-1-0' id='button-mul'>&times;</button>
				<button class='keypad-btn btn-1-1' id='button-div'>&divide;</button>
				<button class='keypad-btn btn-1-2' id='button-e'>E</button>
				<button class='keypad-btn btn-2-0' id='button-paren'>()</button>
				<button class='keypad-btn btn-2-1' id='button-square'>[]</button>
				<button class='keypad-btn btn-2-2' id='button-curly'>{}</button>
				<button class='keypad-btn btn-3-0' id='button-backspace'>&#9003;</button>
				<button class='keypad-btn btn-3-1' id='button-'>-</button>
				<button class='keypad-btn btn-3-2' id='button-'>-</button>
			</div>
			<button class='keypad-tab btn-0-3 active' id='button-numbers'>#</button>
			<button class='keypad-tab btn-1-3' id='button-functions'>f</button>
			<button class='keypad-tab btn-2-3' id='button-logic'>=</button>
			<button class='keypad-tab btn-3-3' id='button-operators'>+</button>
		<br style='clear:both;'/>
		</div>
	</div>
<script type="text/javascript" src="script.js" ></script>
<script type="text/javascript">
$(window).on('resize',function(){
	var $window = $(this);
	var w = $window.width();
	var h = $window.height();

	// Resize for portrait or landscape
	var dynamicStyles = "";
	if( w > h ){
		// Lanscape
		dynamicStyles += '.panel { height:'+h+'px;'
		dynamicStyles += '  width:'+Math.floor(w/2)+'px;}\n';
		dynamicStyles += '#container { width:'+Math.ceil(w*2)+'px;';
		dynamicStyles += '  height:'+Math.ceil(h)+'px;}\n';
		$('#canvas-graph')[0].width = Math.floor(w/2);
		$('#canvas-graph')[0].height = Math.floor(h);
	}else{
		dynamicStyles += '.panel { width:'+w+'px;'
		dynamicStyles += '  height:'+Math.floor(h/2)+'px;}\n';
		dynamicStyles += '#container { width:'+Math.ceil(w)+'px;';
		dynamicStyles += '  height:'+Math.ceil(h/2*3)+'px;}\n';
		$('#canvas-graph')[0].width = Math.floor(w);
		$('#canvas-graph')[0].height = Math.floor(h/2);
	}
	$('#style-dynamic').styleSheet(dynamicStyles);

	// Resize the fonts
	var body = $('body');
	body.css({fontSize:(w+h)/1024*48});

	// Redraw the graph
	redraw();
}).resize();

function wrapSelected(node,leftText,rightText){
	// node = document.getElementById(id);
	var scrollPos = node.scrollTop;
	if(document.selection){
		// IE is surprisingly efficient in this one...
		if(!node.focus()){node.focus();}
		var _sel = document.selection.createRange().text;
		var _txt = document.selection.createRange();
		_txt.text = leftText;
		if(rightText){
			_txt.text += _sel;
			_txt.text += rightText;
		}
	}else{
		
		// Get the locations of the start/end of the selection
		// Grab all of the text before the selection
		// Add the 'left' text to the start of the selection
		var _start = node.selectionStart;
		var _end = node.selectionEnd;
		var _txt = node.value.substr(0,_start);
		_txt += leftText;

		// If we're also adding text to the right side
		// add the selected text PLUS the text we're adding on the right 
		if( rightText ){
			_txt += node.value.substr(_start,_end-_start);
			_txt += rightText;
		}

		// Add the rest of the text and set it on the element
		_txt += node.value.substr(_end);
		node.value = _txt;

		// Fix the selection so it is the same as it was before
		node.selectionStart = _start + leftText.length;
		node.selectionEnd = _start + leftText.length;
		if( rightText ){
			node.selectionEnd = _end + leftText.length + rightText.length-1;
		}
	}
	// If scroll to the cursor (only if `node` is a textarea)
	node.scrollTop = scrollPos;
	node.focus();
}

var activeEquation = $('#in-equation-1')[0];
function insertInEquation(left,right){
	return function(){
		wrapSelected(activeEquation,left,right);
	};
}

function setupKeypad(){

	insertInEquation('abc','def');
	$('#button-0').on('click',insertInEquation('0',''));
	$('#button-1').on('click',insertInEquation('1',''));
	$('#button-2').on('click',insertInEquation('2',''));
	$('#button-3').on('click',insertInEquation('3',''));
	$('#button-4').on('click',insertInEquation('4',''));
	$('#button-5').on('click',insertInEquation('5',''));
	$('#button-6').on('click',insertInEquation('6',''));
	$('#button-7').on('click',insertInEquation('7',''));
	$('#button-8').on('click',insertInEquation('8',''));
	$('#button-9').on('click',insertInEquation('9',''));

	$('#button-dot').on('click',insertInEquation('.',''));
	$('#button-comma').on('click',insertInEquation(',',''));

	$('#button-pi').on('click',insertInEquation('PI',''));
	$('#button-e').on('click',insertInEquation('E',''));
	$('#button-x').on('click',insertInEquation('x',''));
	$('#button-y').on('click',insertInEquation('y',''));

	$('#button-floor').on('click',insertInEquation('floor(',')'));
	$('#button-ceil').on('click',insertInEquation('ceil(',')'));
	$('#button-round').on('click',insertInEquation('round(',')'));
	$('#button-ln').on('click',insertInEquation('ln(',')'));
	$('#button-pow').on('click',insertInEquation('pow(',',)'));
	$('#button-exp').on('click',insertInEquation('exp(',')'));
	$('#button-abs').on('click',insertInEquation('abs(',')'));

	$('#button-sin').on('click',insertInEquation('sin(',')'));
	$('#button-cos').on('click',insertInEquation('cos(',')'));
	$('#button-tan').on('click',insertInEquation('tan(',')'));
	$('#button-asin').on('click',insertInEquation('asin(',')'));
	$('#button-acos').on('click',insertInEquation('acos(',')'));
	$('#button-atan').on('click',insertInEquation('atan(',')'));

	$('#button-more-than').on('click',insertInEquation('>',''));
	$('#button-less-than').on('click',insertInEquation('<',''));
	$('#button-more-equal').on('click',insertInEquation('>=',''));
	$('#button-less-equal').on('click',insertInEquation('<=',''));
	$('#button-equal').on('click',insertInEquation('=',''));
	$('#button-and').on('click',insertInEquation('and',''));
	$('#button-not').on('click',insertInEquation('not',''));
	$('#button-xor').on('click',insertInEquation('xor',''));
	$('#button-or').on('click',insertInEquation('or',''));

	$('#button-add').on('click',insertInEquation('+',''));
	$('#button-sub').on('click',insertInEquation('-',''));
	$('#button-mul').on('click',insertInEquation('*',''));
	$('#button-div').on('click',insertInEquation('/',''));
	$('#button-paren').on('click',insertInEquation('(',')'));
	$('#button-curly').on('click',insertInEquation('{','}'));
	$('#button-square').on('click',insertInEquation('[',']'));
}
function showEquationEditor(){
	var $window = $(window);
	var w = $window.width();
	var h = $window.height();
	if( w > h ){
		$('#container').css({left:-w/2,top:0});
	}else{
		$('#container').css({left:0,top:-h/2});
	}
}
function showGraph(){
	var $window = $(window);
	var w = $window.width();
	var h = $window.height();
	if( w > h ){
		$('#container').css({left:0,top:0});
	}else{
		$('#container').css({left:0,top:0});
	}
	redraw();
}

function hideAllKeypads(){
	$('#keypad-operators').removeClass('show').addClass('hide');
	$('#keypad-logic').removeClass('show').addClass('hide');
	$('#keypad-functions').removeClass('show').addClass('hide');
	$('#keypad-numbers').removeClass('show').addClass('hide');
}
function clearAllKeypadTabs(){
	$('#button-operators').removeClass('active');
	$('#button-logic').removeClass('active');
	$('#button-functions').removeClass('active');
	$('#button-numbers').removeClass('active');
}
function activateKeypad(name){
	hideAllKeypads();
	clearAllKeypadTabs();
	$('#button-'+name).addClass('active');
	$('#keypad-'+name).addClass('show').removeClass('hide');
}

$('#button-numbers').on('click',function(){
	activateKeypad('numbers');
});
$('#button-functions').on('click',function(){
	activateKeypad('functions');
});
$('#button-logic').on('click',function(){
	activateKeypad('logic');
});
$('#button-operators').on('click',function(){
	activateKeypad('operators');
});

$('#canvas-grid').hammer()
  .on('dragstart',handlePanDragStart)
  .on('drag',handlePanDragMove)
  .on('dragend',handlePanDragEnd);

function editEquation(id){
	return function(){
		activeEquation = document.getElementById(id);
		showEquationEditor();
	};
}
$('#in-equation-1').on('focus',editEquation('in-equation-1'));
$('#in-equation-2').on('focus',editEquation('in-equation-2'));
$('#in-equation-3').on('focus',editEquation('in-equation-3'));
$('#in-equation-4').on('focus',editEquation('in-equation-4'));

// $('#panel-equations').on('focus','input',showEquationEditor);
// $('#panel-equations').on('blur','input',showGraph);


$('#btn-zoom-in').on('click',handleZoomIn);
$('#btn-zoom-out').on('click',handleZoomOut);

$('#btn-pan-up').on('click',handlePanUp);
$('#btn-pan-down').on('click',handlePanDown);
$('#btn-pan-left').on('click',handlePanLeft);
$('#btn-pan-right').on('click',handlePanRight);

$('#btn-view-reset').on('click',function(){
	showGraph();
	handleViewReset();
});

$(document).ready(setupKeypad);
</script>
</body>
</html>
